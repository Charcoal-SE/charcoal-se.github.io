<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>
    Autoflagging | Charcoal
    
  </title>
  <link type="text/css" rel="stylesheet" href="/assets/application-246c1429bdd26544d97cac0305ef38e82170d25f6012981a46fe9d1901d56911.css">
  <script src="https://cdn.polyfill.io/v2/polyfill.min.js?features=default,fetch"></script>
  <script type="text/javascript" src="/assets/application-b015c31784daac3c018b559e16583f1f9b87495cffd99b5eddc4ec0d5d73f144.js"></script>
  <script type="text/javascript" src="/assets/vendor-ecc837bbd5d3e5dbfb38524f3faaf1406e7e5490330a1bd2b4728be17a5fffa7.js"></script>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="shortcut icon"
            type="image/png"
            href="/assets/charcoal-fd5b673dc87bbcf444be78adbf43a1198e981d2133de0a3eab4810ca047efbb7.png" />
</head>
<body>
  <div class="body-container">
    
    <div class="header">
      <div class="header-icon text-center">
        <a href="/">
          <img src="/assets/charcoal-fd5b673dc87bbcf444be78adbf43a1198e981d2133de0a3eab4810ca047efbb7.png" height="64" width title="Charcoal: spam-crusaders of the Internet" alt="charcoal.png">
          <span class="title">
            <span>Charcoal</span>
            <small>spam-crusaders of the Internet</small>
          </span>
        </a>
        <label class="nav-toggle-icon fa fa-bars fa-lg" for="nav-toggle"></label>
      </div>
      <input type="checkbox" id="nav-toggle">
      <nav class="text-center top-nav">
        <div class="search-nav">
          <i class="fa fa-search search-icon inline-icon fa-fw"></i>
          <input type="text" placeholder="Search…" id="search-input">
          <a href="#" id="search-close" class="inline-icon close-icon"><i class="fa fa-times fa-fw"></i></a>
        </div>
        <ul class="main-nav">
          <li><a href="/"><i class="fa fa-home" title="Home"></i><span class="mobile-only"> Home</span></a></li>
          <li><a href="https://chat.stackexchange.com/rooms/11540/charcoal-hq"><i class="fa mobile-only fa-comments-o"></i> chat</a></li>
          <li>
            <label class="link" for="projects-toggle">
              more projects <i class="fa fa-chevron-down"></i>
            </label>
            <input type="checkbox" id="projects-toggle">
            <nav class="nav-dropdown">
              <a href="https://metasmoke.erwaysoftware.com/" >metasmoke</a>
            
              <a href="https://charcoal-se.org/ms-urls" >metasmoke URL converter</a>
            
              <a href="https://flovis.charcoal-se.org/" >Farmhouse (Flovis)</a>
            
              <a href="https://charcoal-se.org/blaze" data-turbolinks="false">Blaze</a>
            </nav>
          </li>
          <li><a href="/scripts"><i class="fa mobile-only fa-file-code-o"></i> userscripts</a></li>
          <li><a href="/smokey/"><i class="fa mobile-only fa-file-text-o"></i> wiki</a></li>
          <li>
            <a href="/ms/API-Documentation-(V2)"><i class="fa mobile-only fa-book"></i> api</a>
            (<a href="/ms/API-Documentation-(V1)">v1</a>)
          </li>
          <li><a href="https://github.com/Charcoal-SE" title="GitHub organization"><i class="fa fa-github"></i><span class="mobile-only"> GitHub</span></a></li>
          <li><a href="#" class="search-link"><i class="fa fa-search" title="Search"></i><span class="mobile-only"> Search</span></a></li>
        </ul>
      </nav>
    </div>
    <div class="body">
      <h1 id="autoflagging">Autoflagging</h1>

<section>
  <h2 id="whats-flagging">What is autoflagging?</h2>

  <p>Autoflagging is a subsystem of <a href="https://metasmoke.erwaysoftware.com/">metasmoke</a> that lets us automatically cast spam flags
on Stack Exchange posts if we’re certain enough that they’re spam. To gain that certainty, we calculate the historical
accuracy of the spam checks that caught the post in question, and - essentially - if they’re over a certain mark, we cast
some flags. More detail on how exactly that works is at the bottom of this page.</p>
</section>

<section>
  <h2 id="how-good">How good is it?</h2>

  <p>In the period from 2017-02-01 through 2018-09-11, we successfully cast 114,089 spam flags. Of those, 113,570 were correctly
cast - that is, cast on a confirmed spam post - and 519 were cast in error on legitimate posts. Overall, that’s a 99.55%
accuracy rate.</p>

  <p>This is the chart of flags over time for that period. The <code class="highlighter-rouge">tp_count</code> series represents flags cast on spam; the <code class="highlighter-rouge">fp_count</code>
series flags cast on legitimate posts. Click for larger version.</p>

  <p><a href="https://i.stack.imgur.com/Hcp12.png"><img src="https://i.stack.imgur.com/Hcp12.png" height="400" width="" class="block-center" /></a></p>
</section>

<section>
  <h2 id="how-many">How many flags does it cast?</h2>

  <p>Autoflagging can cast up to four flags on a post it is confident is spam. However, that’s not a flat value - the number of
flags cast varies with the degree of certainty we have. If the system is more than 99.75%* certain, we cast three flags;
above 99.90%*, we cast four flags.</p>

  <p>This doesn’t apply on sites where the number of flags required for auto-deletion of a post is lower. On most Stack Exchange
sites, posts require 6 flags to be automatically deleted as spam by the system. However, on
<a href="https://workplace.stackexchange.com/">The Workplace</a> and on <a href="https://english.stackexchange.com/">English Language &amp; Usage</a>,
the requirement has been dropped to 3. Hence, on these two sites, autoflagging only ever casts one flag automatically, 
regardless of certainty.</p>

  <p><sup>* Correct as of 2018-09-11; subject to change.</sup></p>
</section>

<section>
  <h2 id="where-flags">Where do the flags come from?</h2>

  <p>We are able to cast more than one spam flag on each post by using regular users’ spam flags. Stack Exchange users may grant 
permission for their accounts to be used for autoflagging by
<a href="https://metasmoke.erwaysoftware.com/flagging/ocs">signing up on metasmoke</a>. Once signed up, they may specify under what 
conditions their flags can be used; this enables metasmoke to cast flags in their name.</p>

  <p>Moderators’ flags will never be used, regardless of whether their settings allow it or not; we don’t want to automatically
nuke posts.</p>
</section>

<section>
  <h2 id="how-work">How does it work?</h2>

  <p>This has been alluded to in a number of places here, but for the sake of completeness, autoflagging works along these lines:</p>

  <ul>
    <li><strong>Users sign up</strong> and grant permission for their flags to be used on metasmoke.<br />
Part of this process involves the user setting up “flag conditions”, which specify at what degree of certainty
<em>they personally</em> are happy for their flags to be used, and “site settings”, which govern how many of their flags
autoflagging may use per day and on what sites.</li>
    <li>Orthogonally, <strong>SmokeDetector detects spam</strong> and sends it to metasmoke.<br />
When a new report arrives in metasmoke, among other process, a certainty value is calculated for the post. Using that
value, the system works out if the post is eligible for flagging, and if so which users’ flags may be used.</li>
    <li>The system <strong>casts flags</strong> by selecting randomly from the available users.</li>
  </ul>

  <p>If you’d like more information on the technical side of the system, drop into
<a href="https://chat.stackexchange.com/rooms/11540">Charcoal HQ</a> to have a chat about it.</p>
</section>

<section>
  <h2 id="more-info">More information</h2>

  <ul>
    <li>metasmoke has a <a href="https://metasmoke.erwaysoftware.com/flagging">flagging dashboard</a></li>
    <li>We’ve written a couple of posts on Meta Stack Exchange: <a href="https://meta.stackexchange.com/q/291301">here’s the first</a> and
<a href="https://meta.stackexchange.com/q/307585">here’s the second</a></li>
    <li>You can always drop into <a href="https://chat.stackexchange.com/rooms/11540">Charcoal HQ</a> for a chat</li>
  </ul>
</section>

    </div>
    <div class="footer text-center">
      <p>Charcoal is not affiliated with or sponsored by Stack Exchange, Inc.<br />
        <a href="/security">Security</a> • <a href="/pings/">Contact</a>
      </p>
      <p>
        <a href="https://github.com/Charcoal-SE/charcoal-se.github.io">Website Source</a>
        • By
          
            <a href="https://github.com/j-f1" class="avatar-link">
              <img class="avatar avatar-small" alt="j-f1" width="16" height="16" data-proofer-ignore="true" src="https://avatars2.githubusercontent.com/j-f1?v=3&s=16" srcset="https://avatars2.githubusercontent.com/j-f1?v=3&s=16 1x, https://avatars2.githubusercontent.com/j-f1?v=3&s=32 2x, https://avatars2.githubusercontent.com/j-f1?v=3&s=48 3x, https://avatars2.githubusercontent.com/j-f1?v=3&s=64 4x" />j-f1</a>,
          
            <a href="https://github.com/ArtOfCode-" class="avatar-link">
              <img class="avatar avatar-small" alt="ArtOfCode-" width="16" height="16" data-proofer-ignore="true" src="https://avatars2.githubusercontent.com/ArtOfCode-?v=3&s=16" srcset="https://avatars2.githubusercontent.com/ArtOfCode-?v=3&s=16 1x, https://avatars2.githubusercontent.com/ArtOfCode-?v=3&s=32 2x, https://avatars2.githubusercontent.com/ArtOfCode-?v=3&s=48 3x, https://avatars2.githubusercontent.com/ArtOfCode-?v=3&s=64 4x" />ArtOfCode-</a>,
          
            <a href="https://github.com/iBug" class="avatar-link">
              <img class="avatar avatar-small" alt="iBug" width="16" height="16" data-proofer-ignore="true" src="https://avatars0.githubusercontent.com/iBug?v=3&s=16" srcset="https://avatars0.githubusercontent.com/iBug?v=3&s=16 1x, https://avatars0.githubusercontent.com/iBug?v=3&s=32 2x, https://avatars0.githubusercontent.com/iBug?v=3&s=48 3x, https://avatars0.githubusercontent.com/iBug?v=3&s=64 4x" />iBug</a>,
          
            <a href="https://github.com/angussidney" class="avatar-link">
              <img class="avatar avatar-small" alt="angussidney" width="16" height="16" data-proofer-ignore="true" src="https://avatars1.githubusercontent.com/angussidney?v=3&s=16" srcset="https://avatars1.githubusercontent.com/angussidney?v=3&s=16 1x, https://avatars1.githubusercontent.com/angussidney?v=3&s=32 2x, https://avatars1.githubusercontent.com/angussidney?v=3&s=48 3x, https://avatars1.githubusercontent.com/angussidney?v=3&s=64 4x" />angussidney</a>,
          
          and
          <a href="https://github.com/Charcoal-SE/charcoal-se.github.io/graphs/contributors">
            15 more</a>
        
      </p>
      
        <p>
          <a href="/code">More gory details</a>
          • <a href="https://github.com/Charcoal-SE/charcoal-se.github.io/edit/site/flagging.md" title="flagging.md">Edit on GitHub</a>
          • <a href="https://github.com/Charcoal-SE/charcoal-se.github.io/new/site">New Page</a>
        </p>
      
    </div>
  </div>
  <script>
    window.searchConfig = {
      appId: 'TMPUB31BTZ',
      key: 'c63c2f79258f929439376cfb88862440',
      index: 'main-search',
      baseUrl: '',
    }
    window.redirects = { "/channel": "https://stackoverflow.com/c/charcoal", "/m": "https://metasmoke.erwaysoftware.com", "/store": "https://www.zazzle.co.uk/charcoal_se/products", "/announcements": "https://charcoal-se.org//announcements/", "/smokey/Home": "https://charcoal-se.org//smokey/", "/smokey/Home": "https://charcoal-se.org//smokey/", "/ms/Home": "https://charcoal-se.org//ms/", "/ms/Home": "https://charcoal-se.org//ms/", "/userscripts/": "https://charcoal-se.org//scripts.html", "/userscripts": "https://charcoal-se.org//scripts.html",  }
  </script>
  <!-- Hotjar Tracking Code for charcoal-se.org -->
  <script>
    (function(h,o,t,j,a,r){
      h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
      h._hjSettings={hjid:771814,hjsv:6};
      a=o.getElementsByTagName('head')[0];
      r=o.createElement('script');r.async=1;
      r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
      a.appendChild(r);
    })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
  </script>
</body>
</html>
